<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Eventes Menu and Voting</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <link rel="stylesheet" href="css/dripicons.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>

<body>
    <!-- header -->
    <header id="home" class="header-area">
        <div id="header-sticky" class="menu-area">
            <div class="container">
                <div class="second-menu">
                    <div class="row align-items-center">
                        <div class="col-xl-3 col-lg-3">
                            <div class="logo">
                                <a href="index.html"><img src="img/logo/logo.png" alt="logo"></a>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-9">
                            <div class="responsive"><i class="icon dripicons-align-right"></i></div>
                            <div class="main-menu text-right text-xl-center">
                                <nav id="mobile-menu">
                                    <ul>
                                        <li class="active has-sub"><a href="index.html">Home </a>

                                        </li>
                                        <li class="has-sub">
                                            <a href="about.html">About</a>
                                        </li>

                                        <li class="has-sub">
                                            <a href="events.html">Events</a>
                                        </li>

                                    </ul>
                                </nav>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header-end -->
    <!-- main-area -->
    <main>
        <!-- breadcrumb-area -->
        <section id="parallax" class="slider-area breadcrumb-area d-flex align-items-center justify-content-center fix"
            style="background-image:url(img/innerpage_bg_img.jpg)">
            <div class="slider-shape ss-one layer" data-depth="0.10"><img src="img/doddle_6.png" alt="shape"></div>
            <div class="slider-shape ss-three layer" data-depth="0.40"><img src="img/doddle_9.png" alt="shape"></div>
            <div class="slider-shape ss-four layer" data-depth="0.60"><img src="img/doddle_7.png" alt="shape"></div>
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="breadcrumb-wrap text-center">
                            <div class="breadcrumb-title mb-30">
                                <h2>Menu and Voting</h2>
                            </div>
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Menu and Voting</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content area -->
        <section class="container mt-5">
            <div class="row">
                <div class="col-lg-6">
                    <h3 class="mb-4">Menu</h3>
                    <div id="menu-container">
                        <!-- Menu items will be displayed here -->
                    </div>
                </div>
                <div class="col-lg-6">
                    <h3 class="mb-4">Vote for Your Favorite Dishes</h3>
                    <form id="voting-form">
                        <div id="voting-options" class="form-group">
                            <!-- Voting options will be dynamically generated -->
                        </div>
                        <button type="submit" class="btn btn-primary">Submit Vote</button>
                    </form>
                </div>
            </div>
        </section>
        <!-- Content area-end -->

    </main>

    <!-- main-area-end -->
    <!-- footer -->
    <footer class="footer-bg footer-p" style="background-image:url(img/footer_bg_img.jpg);background-size: cover;">

        <div class="footer-top">
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-xl-12 col-lg-12 col-sm-12 text-center">
                        <div class="footer-widget pt-120 mb-30">
                            <div class="logo mb-35">
                                <a href="#"><img src="img/footer_logo.png" alt="logo"></a>
                            </div>
                            <div class="footer-text mb-20">
                                <p>As we embark on new journeys and paths, it's with a mix of emotions that we bid farewell. 
                                    While farewells can be bittersweet, they also mark the beginning of exciting new chapters in our lives. As we part ways, 
                                    let's take a moment to reflect on the memories we've shared and the bonds we've formed.</p>
                            </div>
                            <div class="footer-social">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                                <a href="#"><i class="fab fa-google-plus-g"></i></a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="copyright-wrap pb-120">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="copyright-text text-center">
                            <div class="footer-link">
                                <ul>
                                    <li><a href="#">About</a></li>
                                    <li><a href="#">Eventime</a></li>

                                    <li><a href="#">Contact</a></li>

                                    <li><a href="#">Venue</a</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer-end -->

    <!-- JS here -->
    <script src="js/vendor/modernizr-3.5.0.min.js"></script>
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/one-page-nav-min.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/ajax-form.js"></script>
    <script src="js/paroller.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/parallax.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/element-in-view.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/main.js"></script>
    <!-- Custom script to load menu and handle voting -->
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script>
        $(document).ready(function() {
            // Fetch menu items from the database
            function fetchMenu() {
                $.get('http://localhost:3000/api/menu', function(data) {
                    let menuHtml = '';
                    data.forEach(item => {
                        menuHtml += `<div class="menu-item">
                                        <h5>${item.name} - ${item.quantity}</h5>
                                        <p>Type: ${item.type}</p>
                                     </div>`;
                        // Append voting option
                        $('#voting-options').append(`<div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="${item.item_no}" id="vote-${item.item_no}">
                                                        <label class="form-check-label" for="vote-${item.item_no}">
                                                            Vote for ${item.name}
                                                        </label>
                                                     </div>`);
                    });
                    $('#menu-container').html(menuHtml);
                });
            }
        
            // Handle form submission
            $('#voting-form').submit(function(event) {
                event.preventDefault();
                let votedItems = [];
                $('#voting-options .form-check-input:checked').each(function() {
                    votedItems.push($(this).val());
                });
        
                // Send the voted items to the server for processing
                $.ajax({
                    url: 'http://localhost:3000/api/processVotes', // Endpoint that processes votes
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ votedItems }),
                    success: function(response) {
                        alert('Thank you for voting!');
                    },
                    error: function() {
                        alert('Error submitting votes. Please try again.');
                    }
                });
            });
        
            // Initial fetch of menu items
            fetchMenu();
        });
        </script>
        
</body>

</html>
